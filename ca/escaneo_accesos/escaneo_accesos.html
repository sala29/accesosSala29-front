<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Escanear accesos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="main-layout">

    <!-- HEADER -->
    <div class="header">
        <h1 id="nombreEvento">Evento</h1>
        <button id="salirBtn" class="salir">Salir</button>
    </div>

    <!-- CARD CÃMARA -->
    <div class="cam-card">
        <button id="scanBtn" class="scan-btn">ðŸ“·</button>
        <span class="cam-label">Escanear QR</span>
    </div>

    <!-- CARD BÃšSQUEDAS -->
    <div class="search-card">

        <div class="search-block">
            <label class="search-title">NÃºm. Socio</label>
            <div class="search-row">
                <input
                    type="number"
                    id="idInput"
                    placeholder="Ej: 42"
                    autocomplete="off"
                    inputmode="numeric"
                >
                <button id="buscarIdBtn" class="search-btn" aria-label="Buscar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M13 6l6 6-6 6"/></svg>
                </button>
            </div>
        </div>

        <div class="search-divider"></div>

        <div class="search-block">
            <label class="search-title">DNI</label>
            <div class="search-row">
                <input
                    type="text"
                    id="dniInput"
                    placeholder="Ej: 12345678A"
                    inputmode="text"
                    autocomplete="off"
                >
                <button id="buscarDniBtn" class="search-btn" aria-label="Buscar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M13 6l6 6-6 6"/></svg>
                </button>
            </div>
        </div>

    </div>

</div>

<!-- â”€â”€ SIN TOCAR â”€â”€ -->
<div id="sheetOverlay" class="sheet-overlay"></div>

<div id="userSheet" class="sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-content">
        <div class="sheet-header">
            <div class="avatar">
                <img id="uFoto">
                <div id="fotoPlaceholder" class="placeholder">ðŸ‘¤</div>
            </div>
            <h2 id="uNombre"></h2>
            <p id="uDni" class="muted"></p>
            <div class="estado">
                <span id="estadoVerificado"></span>
                <span id="estadoBloqueado"></span>
            </div>
        </div>
        <div class="info-grid">
            <div><span>ID</span><strong id="uId"></strong></div>
            <div><span>Nacimiento</span><strong id="uNacimiento"></strong></div>
            <div><span>Email</span><strong id="uEmail"></strong></div>
            <div><span>MÃ³vil</span><strong id="uTelefono"></strong></div>
        </div>
        <div id="feedback" class="feedback"></div>
        <div class="acciones">
            <button id="verificarBtn" class="btn-secundario">Verificar usuario</button>
            <button id="accesoBtn" class="btn-principal">ACCESO</button>
        </div>
    </div>
</div>

<!-- â”€â”€ QR SCREEN REDISEÃ‘ADA â”€â”€ -->
<div id="qrScreen" class="qr-screen" style="display:none">

    <!-- Cabecera fija: nunca la toca la librerÃ­a -->
    <div class="qr-topbar">
        <span class="qr-topbar-title">Escanear QR</span>
        <span class="qr-topbar-sub">Apunta al cÃ³digo del socio</span>
    </div>

    <!-- Zona cÃ¡mara: la librerÃ­a inyecta aquÃ­ su video -->
    <div class="qr-viewport">
        <div id="qr-reader"></div>

        <!-- Marco de esquinas encima del video, siempre visible -->
        <div class="qr-frame">
            <span class="qr-corner tl"></span>
            <span class="qr-corner tr"></span>
            <span class="qr-corner bl"></span>
            <span class="qr-corner br"></span>
            <div class="qr-scan-line"></div>
        </div>
    </div>

    <!-- Pie fijo: z-index alto para no quedar detrÃ¡s del video -->
    <div class="qr-footer">
        <button id="cancelarQrBtn" class="cancelar-qr">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M18 6 6 18M6 6l12 12"/></svg>
            Cancelar
        </button>
    </div>

</div>

<script src="https://unpkg.com/html5-qrcode"></script>
<script src="escaneo_accesos.js"></script>

</body>
</html>